(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{3732:function(e,r,t){Promise.resolve().then(t.bind(t,5988))},5988:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var n=t(7821),a=t(4233),s=t(8161),i=t(2159),c=t(9038),o=t(5050);async function l(){try{let e=await fetch("".concat(o.env.NEXT_PUBLIC_API_URL,"/api/saved-searches"),{cache:"no-store",headers:{"x-user-email":"demo@comicogs.com"}});if(!e.ok)throw Error("Failed to load saved searches");return e.json()}catch(e){return console.error("Failed to fetch saved searches:",e),{savedSearches:[]}}}async function d(){let{savedSearches:e}=await l();return(0,n.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Saved Searches"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your alerts and quick filters. Get notified when new comics match your criteria."})]}),0===e.length?(0,n.jsx)(i.Zb,{children:(0,n.jsxs)(i.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)("div",{className:"text-6xl text-gray-300 mb-4",children:"\uD83D\uDD0D"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No saved searches yet"}),(0,n.jsx)("p",{className:"text-gray-600 text-center mb-6 max-w-md",children:"Save searches from the marketplace to get notified when new comics match your criteria."}),(0,n.jsx)(a.default,{href:"/marketplace",children:(0,n.jsx)(s.z,{children:"Browse Marketplace"})})]})}):(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsxs)(i.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(i.ll,{className:"text-xl text-gray-900",children:e.name}),(0,n.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[(0,n.jsx)(c.C,{variant:"daily"===e.cadence?"default":"secondary",children:"daily"===e.cadence?"\uD83D\uDCC5 Daily":"\uD83D\uDCC6 Weekly"}),(0,n.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),e.lastRunAt&&(0,n.jsxs)("span",{children:["Last run ",new Date(e.lastRunAt).toLocaleDateString()]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,n.jsx)(a.default,{href:"/marketplace?".concat(function(e){let r=new URLSearchParams;for(let[t,n]of Object.entries(e))null!=n&&void 0!==n&&(Array.isArray(n)?n.forEach(e=>r.append(t,String(e))):r.append(t,String(n)));return r.toString()}(e.queryJson)),className:"inline-flex",children:(0,n.jsx)(s.z,{variant:"outline",size:"sm",children:"\uD83D\uDD0D Open Search"})}),(0,n.jsx)(s.z,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:async()=>{if(confirm("Delete this saved search?"))try{(await fetch("/api/saved-searches/".concat(e.id),{method:"DELETE",headers:{"x-user-email":"demo@comicogs.com"}})).ok?window.location.reload():alert("Failed to delete search")}catch(e){alert("Failed to delete search")}},children:"\uD83D\uDDD1️ Delete"})]})]})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Search Criteria"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-md p-3",children:function(e){var r,t,n,a;let s=[];if(e.search&&s.push('Text: "'.concat(e.search,'"')),(null===(r=e.series)||void 0===r?void 0:r.length)&&s.push("Series: ".concat(e.series.join(", "))),e.issue&&s.push("Issue: ".concat(e.issue)),(null===(t=e.grade)||void 0===t?void 0:t.length)&&s.push("Grade: ".concat(e.grade.join(", "))),(null===(n=e.format)||void 0===n?void 0:n.length)&&s.push("Format: ".concat(e.format.join(", "))),e.minPrice||e.maxPrice){let r=[e.minPrice?"$".concat(e.minPrice):"",e.maxPrice?"$".concat(e.maxPrice):""].filter(Boolean).join(" - ");r&&s.push("Price: ".concat(r))}return(null===(a=e.tags)||void 0===a?void 0:a.length)&&s.push("Tags: ".concat(e.tags.join(", "))),s.length>0?s.join(" • "):"All listings"}(e.queryJson)})]}),(0,n.jsxs)("details",{className:"group",children:[(0,n.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[(0,n.jsx)("span",{className:"group-open:hidden",children:"Show detailed filters ▶"}),(0,n.jsx)("span",{className:"hidden group-open:inline",children:"Hide detailed filters ▼"})]}),(0,n.jsx)("div",{className:"mt-2 text-xs",children:(0,n.jsx)("pre",{className:"bg-gray-100 rounded-md p-3 overflow-x-auto text-gray-700",children:JSON.stringify(e.queryJson,null,2)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Change Alert Frequency"}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("select",{defaultValue:e.cadence,className:"text-sm border border-gray-300 rounded-md px-2 py-1 bg-white",onChange:async r=>{try{if((await fetch("/api/saved-searches/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json","x-user-email":"demo@comicogs.com"},body:JSON.stringify({...e,cadence:r.target.value})})).ok){let e=r.target.value;alert("Alert frequency updated to ".concat(e))}else alert("Failed to update frequency")}catch(e){alert("Failed to update frequency")}},children:[(0,n.jsx)("option",{value:"daily",children:"Daily alerts"}),(0,n.jsx)("option",{value:"weekly",children:"Weekly alerts"})]})})]})]})})]},e.id))}),(0,n.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 How Saved Searches Work"}),(0,n.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,n.jsx)("li",{children:"• We'll email you when new comics match your search criteria"}),(0,n.jsx)("li",{children:"• Daily alerts check for matches every 24 hours"}),(0,n.jsx)("li",{children:"• Weekly alerts check for matches every 7 days"}),(0,n.jsx)("li",{children:"• You can save up to 10 searches and change frequencies anytime"})]})]})]})}},9038:function(e,r,t){"use strict";t.d(r,{C:function(){return o}});var n=t(7821),a=t(8078),s=t(8635),i=t(3503);let c=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,r)=>{let{className:t,variant:a,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)(c({variant:a}),t),...s})});o.displayName="Badge"},8161:function(e,r,t){"use strict";t.d(r,{z:function(){return l}});var n=t(7821),a=t(8078),s=t(1860),i=t(8635),c=t(3503);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:l=!1,...d}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,c.cn)(o({variant:a,size:i,className:t})),ref:r,...d})});l.displayName="Button"},2159:function(e,r,t){"use strict";t.d(r,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var n=t(7821),a=t(8078),s=t(3503);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});c.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},3503:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var n=t(9492),a=t(8255);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},5050:function(e,r,t){"use strict";var n,a;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(a=t.g.process)?void 0:a.env)?t.g.process:t(9295)},9295:function(e){!function(){var r={229:function(e){var r,t,n,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{t="function"==typeof clearTimeout?clearTimeout:i}catch(e){t=i}}();var o=[],l=!1,d=-1;function u(){l&&n&&(l=!1,n.length?o=n.concat(o):d=-1,o.length&&f())}function f(){if(!l){var e=c(u);l=!0;for(var r=o.length;r;){for(n=o,o=[];++d<r;)n&&n[d].run();d=-1,r=o.length}n=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function h(e,r){this.fun=e,this.array=r}function m(){}a.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];o.push(new h(e,r)),1!==o.length||l||c(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var s=t[e]={exports:{}},i=!0;try{r[e](s,s.exports,n),i=!1}finally{i&&delete t[e]}return s.exports}n.ab="//";var a=n(229);e.exports=a}()}},function(e){e.O(0,[325,233,115,205,744],function(){return e(e.s=3732)}),_N_E=e.O()}]);